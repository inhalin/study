# ìë°” ë¼ì´ë¸Œ ìŠ¤í„°ë”” 10ì£¼ì°¨

#### ëª©í‘œ

```
ìë°”ì˜ ë©€í‹°ì“°ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì— ëŒ€í•´ í•™ìŠµí•˜ì„¸ìš”.
```

#### í•™ìŠµí•  ê²ƒ

`ğŸŸ¢ completed` `ğŸŸ¡ in progress` `âšª not done`

- ğŸŸ¡ Thread í´ë˜ìŠ¤ì™€ Runnable ì¸í„°í˜ì´ìŠ¤
- ğŸŸ¢ ì“°ë ˆë“œì˜ ìƒíƒœ
- âšª ì“°ë ˆë“œì˜ ìš°ì„ ìˆœìœ„
- ğŸŸ¡ Main ì“°ë ˆë“œ
- ğŸŸ¡ ë™ê¸°í™”
- âšª ë°ë“œë½

<!-- 
í•„ìˆ˜ - runnable, thread ë¬´ìŠ¨ ë©”ì„œë“œì´ê³  ë¬´ìŠ¨ ìƒíƒœì¸ì§€ ìš°ì„ ìˆœìœ„ëŠ” ì–´ë–»ê²Œ ë˜ëŠ”ì§€
      main thread, ë™ê¸°í™”ë€, ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ë‚˜
      lockìœ¼ë¡œ ì“°ëŠ” obj, lockì˜ ê°œë…, lockì„ ì¡ëŠ”ë‹¤?, ì¢…ë¥˜, deadlock
ì„ íƒ - callable, threadpool
      ForkJoinPool https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html
 -->


---

## í”„ë¡œì„¸ìŠ¤ì™€ ì“°ë ˆë“œ

í”„ë¡œì„¸ìŠ¤ëŠ” í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë©´ í•„ìš”í•œ ë©”ëª¨ë¦¬ì™€ ë°ì´í„° ë“±ì˜ ìì›ì„ í• ë‹¹ë°›ê³  ì“°ë ˆë“œëŠ” ì´ ìì›ì„ ì´ìš©í•´ ì‹¤ì œë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. ëª¨ë“  í”„ë¡œì„¸ìŠ¤ëŠ” ìµœì†Œí•œ í•˜ë‚˜ ì´ìƒì˜ ì“°ë ˆë“œê°€ ì¡´ì¬í•˜ê³  ë‘˜ ì´ìƒì˜ ì“°ë ˆë“œë¥¼ ê°€ì§„ í”„ë¡œì„¸ìŠ¤ë¥¼ **ë©€í‹°ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤**ë¼ê³  í•œë‹¤. 

ì§€ê¸ˆê¹Œì§€ ê³µë¶€í•œ ë‚´ìš©ë“¤ì€ í•œë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ì‹¤í–‰í•˜ëŠ” ì‹±ê¸€ ì“°ë ˆë“œì— ëŒ€í•´ ë³´ì•˜ëŠ”ë°, JVMì€ í•œë²ˆì— ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ì‘ì—…í•˜ëŠ” ê²ƒì„ ì§€ì›í•œë‹¤. ë©€í‹°ì“°ë ˆë“œëŠ” ê³µìœ  ì£¼ê¸°ì–µ ì¥ì¹˜ì— ìˆëŠ” ê°’ê³¼ ê°ì²´ì— ëŒ€í•´ ì‘ë™í•˜ëŠ” ê°ê°ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤. ë©€í‹°ì“°ë ˆë“œëŠ” ì—¬ëŸ¬ê°œì˜ í•˜ë“œì›¨ì–´ í”„ë¡œì„¸ì„œë¥¼ ê°–ê±°ë‚˜, í•˜ë‚˜ì˜ í•˜ë“œì›¨ì–´ í”„ë¡œì„¸ì„œë¥¼ ì‹œê°„ë¶„í• í•˜ê±°ë‚˜, ì—¬ëŸ¬ê°œì˜ í•˜ë“œì›¨ì–´ í”„ë¡œì„¸ì„œë¥¼ ì‹œê°„ë¶„í•  í•¨ìœ¼ë¡œì¨ ì§€ì›ë  ìˆ˜ ìˆë‹¤.

ì“°ë ˆë“œë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ `Thread` í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì“°ë ˆë“œëŠ” í•´ë‹¹í•˜ëŠ” `Thread` ê°ì²´ì—ì„œ `start()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí• ë•Œ ì‘ì—…ì„ ì‹œì‘í•œë‹¤.

ë©€í‹°ì“°ë ˆë“œì˜ ë™ì‘ì€ íŠ¹íˆë‚˜ ì œëŒ€ë¡œ ë™ê¸°í™” ë˜ì§€ ì•Šì•˜ì„ë•Œ í—·ê°ˆë¦´ ìˆ˜ ìˆë‹¤. ë©€í‹°ì“°ë ˆë“œì—ì„œ ì—…ë°ì´íŠ¸ëœ ê³µìœ ìì›ì˜ readì— ì˜í•´ ì–´ë–¤ ê°’ì´ ë³´ì¼ ê²ƒì¸ì§€ì— ëŒ€í•œ ê·œì¹™ì´ ìˆë‹¤. 

### ë©€í‹°ì“°ë ˆë”©ì˜ ì¥ë‹¨ì 

ë©€í‹°ì“°ë ˆë”©ì˜ ì¥ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤

- CPUì˜ ì‚¬ìš©ë¥ ì„ í–¥ìƒì‹œí‚¨ë‹¤.
- ìì›ì„ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ì‚¬ìš©ìì— ëŒ€í•œ ì‘ë‹µì„±ì´ í–¥ìƒëœë‹¤.
- ì‘ì—…ì´ ë¶„ë¦¬ë˜ì–´ ì½”ë“œê°€ ê°„ê²°í•´ì§„ë‹¤.

ì—¬ëŸ¬ ì‚¬ìš©ìì—ê²Œ ì„œë¹„ìŠ¤ë¥¼ í•´ì£¼ëŠ” ì„œë²„ í”„ë¡œê·¸ë¨ì˜ ê²½ìš° ë©€í‹°ì“°ë ˆë“œë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì€ í•„ìˆ˜ì ì´ë‹¤. í•˜ë‚˜ì˜ ì„œë²„ í”„ë¡œì„¸ìŠ¤ê°€ ì—¬ëŸ¬ê°œì˜ ì“°ë ˆë“œë¥¼ ìƒì„±í•´ì„œ ì“°ë ˆë“œì™€ ì‚¬ìš©ìì˜ ìš”ì²­ì´ ì¼ëŒ€ì¼ë¡œ ì²˜ë¦¬ë˜ë„ë¡ í”„ë¡œê·¸ë˜ë°í•´ì•¼ í•œë‹¤.

ê·¸ëŸ¬ë‚˜ ë©€í‹°ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ê°™ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ìì›ì„ ê³µìœ í•˜ë©° ì‘ì—…í•˜ê¸° ë•Œë¬¸ì— ë™ê¸°í™”(synchronization), êµì°©ìƒíƒœ(deadlock)ì™€ ê°™ì€ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆì–´ì„œ ì‹ ì¤‘í•˜ê²Œ í”„ë¡œê·¸ë˜ë°í•´ì•¼ í•œë‹¤.

---

## Thread í´ë˜ìŠ¤ì™€ Runnable ì¸í„°í˜ì´ìŠ¤

ì“°ë ˆë“œë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ Thread í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ë°©ë²•ê³¼ Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²• ë‘ê°€ì§€ê°€ ìˆë‹¤. Threadë¥¼ ìƒì†ë°›ìœ¼ë©´ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì´ ì¼ë°˜ì ì´ë‹¤. ë˜í•œ Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ì¬ì‚¬ìš©ì„±ì´ ë†’ê³  ì½”ë“œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë” ê°ì²´ì§€í–¥ì ì´ë‹¤. 

Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ì“°ë ˆë“œì˜ ë™ì‘ì„ íŠ¹ë³„íˆ ë°”ê¾¸ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê·¸ì € ì“°ë ˆë“œê°€ ë™ì‘ì‹œí‚¬ ë¬´ì–¸ê°€ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒ ë¿ì´ë‹¤. Thread í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ ìì‹í´ë˜ìŠ¤ëŠ” ì–´ë–¤ ë™ì‘ì„ í•˜ë“  ì“°ë ˆë“œ ì•ˆì—ì„œ ì´ë£¨ì–´ì§„ë‹¤. 

ë§Œì•½ JDK4ë‚˜ ê·¸ ì´í•˜ë²„ì „ì—ì„œ ì‘ì—…ì„ í•œë‹¤ë©´ `start()` ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šì€ ì“°ë ˆë“œê°€ ìˆë‹¤ë©´ ê·¸ ì“°ë ˆë“œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ìƒê¸´ë‹¤. (http://bugs.java.com/bugdatabase/view_bug.do;jsessionid=5869e03fee226ffffffffc40d4fa881a86e3:WuuT?bug_id=4533087)

Java 1.5ë¶€í„° ë²„ê·¸ê°€ ê³ ì³ì¡Œì§€ë§Œ 1.4 ì´í•˜ì—ì„œëŠ” ì—¬ì „íˆ ë²„ê·¸ê°€ ìƒê¸´ë‹¤. ì´ ë¬¸ì œëŠ” í”„ë¡œê·¸ë¨ì„ ë¹Œë“œí•  ë•Œ ì“°ë ˆë“œê°€ ë‚´ë¶€ ì“°ë ˆë“œ í…Œì´ë¸”ì˜ ì°¸ì¡°ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ë˜ëŠ”ë°, `start()` ë©”ì†Œë“œê°€ ì™„ë£Œë ê¹Œì§€ ì´ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì§€ì›Œì§€ì§€ ì•Šê³  ì“°ë ˆë“œê°€ ê·¸ ì°¸ì¡°ì— ìˆëŠ” í•œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì´ ì¼ì–´ë‚˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.

```java
public class ThreadAndRunnable {
    public static void main(String[] args) {
        // 1. Threadì˜ ìì†í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
        MyThread t1 = new MyThread(); 
        
        // 2. Runnableì„ êµ¬í˜„í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
        MyRunnable r = new MyRunnable();  
        Thread t2 = new Thread(r);  // ìƒì„±ì Thread(Runnable target)
        
        // 3. ë‘ë²ˆì§¸ ë°©ë²•ì„ ì¤„ì—¬ì“´ ì½”ë“œ
        Thread t3 = new Thread(new MyRunnable()); 

        t1.start();
        t2.start();
        t3.start();
    }
}

// Thread í´ë˜ìŠ¤ ìƒì†
class MyThread extends Thread {

    public void run(){
        System.out.println("MyThread is " + getName()); 
        // getName() -> Thread í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥
    }
}

// Runnable ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
class MyRunnable implements Runnable {

    @Override
    public void run() {
        System.out.println("MyRunnable is " + Thread.currentThread().getName());  
        // Thread.currentThread().getName() 
        //   -> Thread í´ë˜ìŠ¤ì˜ static ë©”ì„œë“œì¸ currentThread()ë¥¼ í˜¸ì¶œí•´ì„œ ì“°ë ˆë“œì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì–»ì–´ì•¼ ë©”ì„œë“œ í˜¸ì¶œ ê°€ëŠ¥

    }
}
```

> ê²°ê³¼

```
MyThread is Thread-0
MyRunnable is Thread-1
MyRunnable is Thread-2
```

#### ì“°ë ˆë“œ ì´ë¦„ ì§€ì •/ë³€ê²½

ì“°ë ˆë“œì˜ ì´ë¦„ì€ `Thread(Runnable target, String name)`, `Thread(String name)`, `void setName(String name)`ê³¼ ê°™ì€ ìƒì„±ìë‚˜ ë©”ì„œë“œë¥¼ í†µí•´ ì§€ì •í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```java
public class SettingThreadName {
    public static void main(String[] args) {
        NamedThread t1 = new NamedThread();
        Thread t2 = new Thread(new NamedRunnable(), "my first named runnable");

        t1.start();
        t2.start();
    }
}

class NamedThread extends Thread {
    public void run() {
        setName("my first named thread");
        System.out.println("This is " + getName());
    }
}

class NamedRunnable implements Runnable {
    public void run(){
        System.out.println("This is " + Thread.currentThread().getName());
    }
}
```

---

## ì“°ë ˆë“œì˜ ìƒíƒœ

ëª¨ë“  ìš´ì˜ì‹œìŠ¤í…œì€ ì“°ë ˆë“œì— ëŒ€í•œ ê´€ì ì´ ìˆëŠ”ë° ì„¸ë¶€ì ìœ¼ë¡œ ì¡°ê¸ˆì”© ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤. ìë°”ëŠ” ì´ëŸ° ì„¸ë¶€ì‚¬í•­ì„ ìµœëŒ€í•œ ì¶”ìƒí™”ì‹œí‚¤ê¸° ìœ„í•´ `Thread.State`ë¼ê³  ë¶ˆë¦¬ëŠ” enumì„ ê°–ê³  ìˆë‹¤. `Thread.State`ì˜ ê°’ì€ ì“°ë ˆë“œ ìƒì• ì£¼ê¸°ì˜ ì „ì²´ì ì¸ ê°œìš”ë¥¼ ë³´ì—¬ì¤€ë‹¤. ì“°ë ˆë“œëŠ” íŠ¹ì • ìˆœê°„ì— ë‹¨ í•˜ë‚˜ì˜ ìƒíƒœë§Œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

- `NEW` : ì“°ë ˆë“œê°€ ìƒì„±ë˜ì—ˆì§€ë§Œ `start()` ë©”ì„œë“œëŠ” í˜¸ì¶œí•˜ì§€ ì•Šì€ ìƒíƒœì´ë‹¤. ëª¨ë“  ì“°ë ˆë“œëŠ” ì´ ìƒíƒœì—ì„œ ì‹œì‘í•œë‹¤.
- `RUNNABLE` : ì“°ë ˆë“œ ìŠ¤ì¼€ì¤„ë§ë˜ë©´ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ìƒíƒœì´ê±°ë‚˜ ì“°ë ˆë“œê°€ ì‹¤í–‰ì¤‘ì¸ ìƒíƒœì´ë‹¤. JVMì—ì„œ ì‹¤í–‰ë˜ëŠ” ì“°ë ˆë“œê°€ ì´ ìƒíƒœì´ë‹¤.
- `BLOCKED` : ì“°ë ˆë“œê°€ ì‹¤í–‰ì¤‘ì´ ì•„ë‹ˆê³  ë™ê°€í™”ëœ ë©”ì„œë“œë‚˜ blockì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆê²Œ ì„ê³„ì˜ì—­ì˜ lockì„ ì¡ìœ¼ë ¤ê³  ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœì´ë‹¤.
- `WAITING` : ì“°ë ˆë“œê°€ `Object.wait()` ë˜ëŠ” `Thread.join()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ íŠ¹ì • í–‰ë™ì„ í• ë•Œê¹Œì§€ ë¬´ê¸°í•œ ëŒ€ê¸°ì¤‘ì¸ ìƒíƒœì´ë‹¤.
- `TIMED_WAITING` : ì“°ë ˆë“œê°€ ì‹œê°„ê°’ì´ ìˆëŠ” `Thread.sleep()`ë©”ì„œë“œë‚˜ `Object.wait()`, `Thread.join()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ê·¸ ì‹œê°„ì´ ì§€ë‚  ë•Œê¹Œì§€ ëŒ€ê¸°ì¤‘ì¸ ìƒíƒœì´ë‹¤.
- `TERMINATED` : ì“°ë ˆë“œì˜ `run()` ë©”ì†Œë“œê°€ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì—ˆê±°ë‚˜ ì˜ˆì™¸ë¥¼ ë˜ì§€ë©´ì„œ ëª¨ë“  ë™ì‘ì„ ëë‚¸ ìƒíƒœì´ë‹¤. 

![ìë°”ì˜ ì“°ë ˆë“œ ë¼ì´í”„ì‚¬ì´í´](img/week10/thread-lifecycle-java.jpg)

ì´ë¯¸ì§€ ì¶œì²˜ : https://www.baeldung.com/wp-content/uploads/2018/02/Life_cycle_of_a_Thread_in_Java.jpg

#### `NEW` , `RUNNABLE`

```java
public class NewState {
    public static void main(String[] args) throws InterruptedException {
        Runnable runnable = new NewRunnable();
        Thread t = new Thread(runnable);
        System.out.println(t.getState());   // NEW

        t.start();
        System.out.println(t.getState());   // RUNNABLE
    }
}

class NewRunnable implements Runnable{
    @Override
    public void run() {}
}

```

#### `BLOCKED`

```java
public class BlockedState {
    public static void main(String[] args) throws InterruptedException {
        Thread t1 = new Thread(new BlockedRunnable());
        Thread t2 = new Thread(new BlockedRunnable());

        t1.start();
        t2.start();

        Thread.sleep(1000);

        System.out.println(t2.getState());  // BLOCKED
        System.exit(0);
    }
}

class BlockedRunnable implements Runnable {
    @Override
    public void run() {
        commonResource();
    }

    public static synchronized void commonResource() {
        while(true) {
            // t1ì´ ì´ ë©”ì„œë“œë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šì•˜ëŠ”ë° t2ê°€ ì‹¤í–‰í•˜ë ¤ê³  í•˜ëŠ” ìƒí™©ì„ ë§Œë“¤ì–´ ì£¼ê¸° ìœ„í•œ ë¬´í•œë£¨í”„
        }
    }
}
```

#### `WAITING`

```java
public class WaitingState implements Runnable{
    public static Thread t1;

    public static void main(String[] args) {
        t1 = new Thread(new WaitingState());
        t1.start(); // WAITING
    }

    public void run(){
        Thread t2 = new Thread(new WaitingRunnable());
        t2.start();
        try {
            t2.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

class WaitingRunnable implements Runnable {
    public void run() {
        System.out.println(WaitingState.t1.getState());
    }
}
```

#### `TIMED_WAITING`

```java
public class TimedWaitingState {
    public static void main(String[] args) throws InterruptedException {
        Thread t = new Thread(new TimedWaitingRunnable());
        t.start();
        Thread.sleep(1000);
        System.out.println(t.getState()); // TIMED_WAITING
    }
}

class TimedWaitingRunnable implements Runnable{
    @Override
    public void run() {
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
```

#### `TERMINATED`

```java
public class TerminatedState implements Runnable{
    public static void main(String[] args) throws InterruptedException {
        Thread t = new Thread(new TerminatedState());
        t.start();
        Thread.sleep(1000); // ì“°ë ˆë“œ tê°€ ì‹¤í–‰ë˜ê³  ëë‚˜ëŠ” í…€ ë§Œë“¤ê¸° ìœ„í•¨
        System.out.println(t.getState()); // TERMINATED
    }

    @Override
    public void run() {

    }
}
```

---

## ì“°ë ˆë“œì˜ ìš°ì„ ìˆœìœ„



---

## Main ì“°ë ˆë“œ

main ë©”ì„œë“œì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì“°ë ˆë“œë¥¼ main ì“°ë ˆë“œë¼ê³  í•œë‹¤. í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í•˜ë‚˜ì˜ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ê·¸ ì“°ë ˆë“œê°€ main ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤.

main ë©”ì„œë“œê°€ ìˆ˜í–‰ì„ ë§ˆì³¤ë”ë¼ê³  ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì•„ì§ ì‘ì—…ì„ ë§ˆì¹˜ì§€ ì•Šì•˜ë‹¤ë©´ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ì‹¤í–‰ì¤‘ì¸ ì‚¬ìš©ì ì“°ë ˆë“œê°€ í•˜ë‚˜ë„ ì—†ì„ë•Œë§Œ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œëœë‹¤. 

---

## ë™ê¸°í™”

ìë°”ëŠ” ì“°ë ˆë“œê°„ì— ì •ë³´ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•œ ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ì„ ê°–ê³  ìˆë‹¤. ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•ì´ ë°”ë¡œ ì„ê³„ì˜ì—­ì„ ì´ìš©í•´ êµ¬í˜„ë˜ëŠ” ë™ê¸°í™”ì´ë‹¤. ìë°”ì—ì„œ ê°ê°ì˜ ê°ì²´ëŠ” ì“°ë ˆë“œê°€ lockí•˜ê±°ë‚˜ unlock í•  ìˆ˜ ìˆëŠ” ì„ê³„ ì˜ì—­ê³¼ ê´€ê³„ë˜ì–´ ìˆë‹¤. í•œë²ˆì— ë‹¨ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ì„ê³„ì˜ì—­ì˜ lockë¥¼ ì¡ì„ ìˆ˜ ìˆë‹¤. ê·¸ ì™¸ ë‹¤ë¥¸ ì“°ë ˆë“œëŠ” ì„ê³„ì˜ì—­ì˜ lockì„ ì¡ì„ ìˆ˜ ìˆì„ ë•Œê¹Œì§€ blockëœë‹¤. í•˜ë‚˜ì˜ ì“°ë ˆë“œëŠ” íŠ¹ì • ì„ê³„ì˜ì—­ì˜ lockì„ ì—¬ëŸ¬ë²ˆ ì¡ì„ ìˆ˜ ìˆë‹¤. ê°ê°ì˜ unlockì€ lock ë™ì‘ í•˜ë‚˜ì˜ íš¨ê³¼ë¥¼ ë°˜ì „ì‹œí‚¨ë‹¤.

ë©€í‹°ì“°ë ˆë“œ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ê°™ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ì˜ ìì›ì„ ê³µìœ í•´ì„œ ì‘ì—…í•˜ê¸° ë•Œë¬¸ì— ì„œë¡œì˜ ì‘ì—…ì— ì˜í–¥ì„ ì£¼ê²Œ ë˜ëŠ”ë° ê·¸ëŸ¬ë‹¤ë³´ë©´ ì›ë˜ì˜ ì˜ë„ì™€ëŠ” ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ í•œ ì“°ë ˆë“œê°€ íŠ¹ì • ì‘ì—…ì„ ëë§ˆì¹ ë•Œê¹Œì§€ ë‹¤ë¥¸ ì“°ë ˆë“œì— ë°©í•´ë°›ì§€ ì•Šë„ë¡ ë§‰ì„ í•„ìš”ê°€ ìˆëŠ”ë° ì´ê²ƒì„ ì“°ë ˆë“œì˜ ë™ê¸°í™”ë¼ê³  í•œë‹¤.

### synchronizedë¥¼ ì´ìš©í•œ ë™ê¸°í™”

#### íŠ¹ì •ì˜ì—­ì„ ì„ê³„ì˜ì—­ìœ¼ë¡œ ì§€ì •

ë©”ì„œë“œ ë‚´ì˜ ì½”ë“œ ì¼ë¶€ë¥¼ ë¸”ëŸ­ìœ¼ë¡œ ê°ì‹¸ê³  ê·¸ ì•ì— `synchronized(ì°¸ì¡°ë³€ìˆ˜)`ë¶™ì—¬ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ ì°¸ì¡°ë³€ìˆ˜ëŠ” ë½ì„ ê±¸ê³ ì í•˜ëŠ” ê°ì²´ë¥¼ ì°¸ì¡°í•´ì•¼ í•œë‹¤. ì´ ë¸”ëŸ­ì„ synchronized ë¸”ëŸ­ì´ë¼ê³  í•˜ê³  ì´ ê°ì±„ì˜ ë¸”ëŸ­ì´ ì„ê³„ì˜ì—­ì´ ëœë‹¤. ì“°ë ˆë“œëŠ” ì„ê³„ì˜ì—­ì— ëŒ€í•´ lockì„ ì–»ê³  ë™ê¸°í™”ëœ ëª…ë ¹ë¬¸ì˜ ë°”ë”” ë¶€ë¶„ì„ ì‹¤í–‰í•œë‹¤. ë°”ë”” ë¶€ë¶„ì˜ ë™ì‘ì´ ì •ìƒì ì´ë“  ì˜ˆì™¸ë¥¼ ë±‰ë“  ì™„ë£Œëœë‹¤ë©´ í•´ë‹¹ ì„ê³„ì˜ì—­ì€ ìë™ìœ¼ë¡œ unlockëœë‹¤.

#### ë©”ì„œë“œë¥¼ ì„ê³„ì˜ì—­ìœ¼ë¡œ ì§€ì •

ë©”ì„œë“œ ì•ì— `synchronized`ë¥¼ ë¶™ì—¬ ë™ê¸°í™”ëœ ë©”ì„œë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³  ê·¸ë ‡ê²Œ í•˜ë©´ ë©”ì„œë“œ ì „ì²´ê°€ ì„ê³„ì˜ì—­ìœ¼ë¡œ ì„¤ì •ëœë‹¤. ë™ê¸°í™”ëœ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ í•´ë‹¹ ë©”ì„œë“œê°€ í¬í•¨ëœ ê°ì²´ì˜ lockì„ ì–»ëŠ”ë‹¤. ë§Œì•½ ë™ê¸°í™”ëœ ë©”ì„œë“œê°€ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë¼ë©´ ë©”ì„œë“œê°€ í˜¸ì¶œëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆëŠ” ì„ê³„ì˜ì—­ì„ ì ê·¼ë‹¤. ë§Œì•½ ë™ê¸°í™”ëœ ë©”ì„œë“œê°€ static ì´ë¼ë©´ ê·¸ ë©”ì„œë“œê°€ ì •ì˜ëœ í´ë˜ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í´ë˜ìŠ¤ ê°ì²´ì˜ ì„ê³„ì˜ì—­ì„ ì ê·¼ë‹¤. ë©”ì„œë“œì˜ ë°”ë”” ë¶€ë¶„ì´ ì •ìƒì ì´ë“  ì˜ˆì™¸ë¥¼ ë±‰ë“  ì™„ë£Œëœë‹¤ë©´ í•´ë‹¹ ì„ê³„ì˜ì—­ì€ ìë™ìœ¼ë¡œ unlockëœë‹¤.



ìë°”ëŠ” deadlockì„ ê°ì§€í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê±°ë‚˜ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë§Œì•½ í•„ìš”í•˜ë‹¤ë©´ ì—¬ëŸ¬ê°œì˜ ê°ì²´ì— ëŒ€í•´ (ì§ê°„ì ‘ì ìœ¼ë¡œ) lockì„ ì¡ëŠ” ì“°ë ˆë“œê°€ ìˆëŠ” í”„ë¡œê·¸ë¨ì—ëŠ” deadlockì´ ìƒê¸°ì§€ ì•ŠëŠ” ìë°” ê¸°ë³¸íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ë“±ì˜ ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

volatile ë³€ìˆ˜ë¥¼ ì½ê³  ì“°ê±°ë‚˜ `java.util.concurrent` íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë“±ì˜ ë‹¤ë¥¸ ë°©ë²•ë“¤ë¡œë„ ë™ê¸°í™”ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

---

## ë°ë“œë½

êµì°©ìƒíƒœ(deadlock)ë€ ë‘ ì“°ë ˆë“œê°€ ìì›ì„ ì ìœ í•œ ìƒíƒœì—ì„œ ì„œë¡œ ìƒëŒ€í¸ì´ ì ìœ í•œ ìì›ì„ ì‚¬ìš©í•˜ë ¤ê³  ê¸°ë‹¤ë¦¬ëŠë¼ ì§„í–‰ì´ ë©ˆì¶° ìˆëŠ” ìƒíƒœë¥¼ ë§í•œë‹¤.

---

## ì°¸ê³ ìë£Œ

1. ë‚¨ê¶ì„±. *Javaì˜ ì •ì„ 3íŒ.* ë„ìš°ì¶œíŒ, 2016.

2. Evans, Benjamin J. and David Flanagan. *Java in a Nutshell.* O'Reilly Media, 2019.

3. https://docs.oracle.com/javase/specs/jls/se15/html/jls-17.html

4. https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html

5. https://howtodoinjava.com/java/multi-threading/

6. http://www.tcpschool.com/java/java_thread_concept
